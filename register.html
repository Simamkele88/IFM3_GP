<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register for MTM</title>
    <link rel="stylesheet" href="reg.css">
    <link rel="icon" type="image/png" href="favicon.png">
</head>

<body>
    <div class="outer-container">
        <div class="logo-heading">
            <img src="favicon.png" alt="MTM Logo" class="circle-img">
            <h2 class="log-reg-heading">Register</h2>
        </div>

        <form class="register-box">
            <div class="register-container">
                <!-- Row 1: Title and First Name -->
                <div class="input-row">
                    <div class="input-group">
                        <label class="log-reg-label">Title</label>
                        <select class="log-reg-input" required>
                            <option value="">Select</option>
                            <option value="Mr">Mr</option>
                            <option value="Mrs">Mrs</option>
                            <option value="Ms">Ms</option>
                            <option value="Dr">Dr</option>
                        </select>
                        <p class="error-message" id="titleError"></p>
                    </div>
                    <div class="input-group">
                        <label class="log-reg-label">First Name</label>
                        <input class="log-reg-input" type="text" id="firstName" required>
                        <p class="error-message" id="firstNameError"></p>
                    </div>
                </div>

                <!-- Row 2: Last Name and Email -->
                <div class="input-row">
                    <div class="input-group">
                        <label class="log-reg-label">Last Name</label>
                        <input class="log-reg-input" type="text" id="lastName" required>
                        <p class="error-message" id="lastNameError"></p>
                    </div>
                    <div class="input-group">
                        <label class="log-reg-label">Email</label>
                        <input class="log-reg-input" type="email" id="email" required>
                        <p class="error-message" id="emailError"></p>
                    </div>
                </div>

                <!-- Row 3: Phone and Registration Key -->
                <div class="input-row">
                    <div class="input-group">
                        <label class="log-reg-label">Phone</label>
                        <input class="log-reg-input" type="tel" id="phone" required>
                        <p class="error-message" id="phoneError"></p>
                    </div>
                    <div class="input-group">
                        <label class="log-reg-label">Registration Key</label>
                        <input class="log-reg-input" type="text" id="regKey" required>
                        <p class="error-message" id="regKeyError"></p>
                    </div>
                </div>

                <!-- Row 4: SA ID/Passport and Password -->
                <div class="input-row">
                    <div class="input-group">
                        <label class="log-reg-label">SA ID/Passport</label>
                        <input class="log-reg-input" type="text" id="idNumber" required>
                        <p class="error-message" id="idNumberError"></p>
                    </div>
                    <div class="input-group">
                        <label class="log-reg-label">Password</label>
                        <input class="log-reg-input" type="password" id="password" required>
                        <p class="error-message" id="passwordError"></p>
                    </div>
                </div>

                <button type="submit" class="log-reg-button">Register</button>
            </div>
        </form>

        <div class="alternative-logs">
            <p>Already have an account? <a href="login.html">Sign in</a></p>
        </div>
    </div>

    <script>
        // Basic validation for email
        const emailInput = document.getElementById("email");
        const emailError = document.getElementById("emailError");

        emailInput.addEventListener("input", () => {
            const email = emailInput.value;
            const isValid = /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);

            if (email.length === 0) {
                emailError.textContent = "";
            } else if (!isValid) {
                emailError.textContent = "Invalid email";
            } else {
                emailError.textContent = "";
            }
        });

        // Add similar validation for other fields as needed
    </script>
    <script>
        // DOM Elements
        const phoneInput = document.getElementById("phone");
        const regKeyInput = document.getElementById("regKey");
        const idNumberInput = document.getElementById("idNumber");
        const passwordInput = document.getElementById("password");

        // Error Elements
        const phoneError = document.getElementById("phoneError");
        const regKeyError = document.getElementById("regKeyError");
        const idNumberError = document.getElementById("idNumberError");
        const passwordError = document.getElementById("passwordError");

        // Set default phone prefix
        phoneInput.value = "+27";

        // Phone Validation
        phoneInput.addEventListener("input", (e) => {
            // Prevent modification of +27 prefix
            if (!phoneInput.value.startsWith("+27")) {
                phoneInput.value = "+27" + phoneInput.value.replace(/^\+27/, '');
            }

            const phone = phoneInput.value;
            const isValid = /^\+27[0-9]{9}$/.test(phone);

            if (phone.length === 3) {
                phoneError.textContent = "";
            } else if (!isValid) {
                phoneError.textContent = "Invalid cell phone number (e.g., +27821234567)";
            } else {
                phoneError.textContent = "";
            }
        });

        // Registration Key Validation
        regKeyInput.addEventListener("input", () => {
            const regKey = regKeyInput.value;
            const isValid = /^REG-[0-9]{7}$/.test(regKey);

            if (regKey.length === 0) {
                regKeyError.textContent = "";
            } else if (!isValid) {
                regKeyError.textContent = "Must be REG- followed by 7 digits (e.g., REG-1234567)";
            } else {
                regKeyError.textContent = "";
            }
        });

        // ID Number Validation
        idNumberInput.addEventListener("input", () => {
            const idNumber = idNumberInput.value;
            const isValid = /^[0-9]{13}$/.test(idNumber);

            if (idNumber.length === 0) {
                idNumberError.textContent = "";
            } else if (!isValid) {
                idNumberError.textContent = "Must be 13 digits";
            } else {
                idNumberError.textContent = "";
            }
        });

        // Password Validation
        passwordInput.addEventListener("input", () => {
            const password = passwordInput.value;
            const hasUpperCase = /[A-Z]/.test(password);
            const hasLowerCase = /[a-z]/.test(password);
            const hasNumber = /[0-9]/.test(password);
            const hasSpecialChar = /[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(password);

            let errorMessage = "";

            if (password.length === 0) {
                errorMessage = "";
            } else {
                if (password.length < 8) {
                    errorMessage += "At least 8 characters. ";
                }
                if (!hasUpperCase) {
                    errorMessage += "At least one uppercase letter. ";
                }
                if (!hasLowerCase) {
                    errorMessage += "At least one lowercase letter. ";
                }
                if (!hasNumber) {
                    errorMessage += "At least one number. ";
                }
                if (!hasSpecialChar) {
                    errorMessage += "At least one special character. ";
                }
            }

            passwordError.textContent = errorMessage;
        });

        // Form submission validation
        document.querySelector("form").addEventListener("submit", (e) => {
            let isValid = true;

            // Trigger all validations
            phoneInput.dispatchEvent(new Event("input"));
            regKeyInput.dispatchEvent(new Event("input"));
            idNumberInput.dispatchEvent(new Event("input"));
            passwordInput.dispatchEvent(new Event("input"));

            // Check if any errors exist
            if (phoneError.textContent || regKeyError.textContent ||
                idNumberError.textContent || passwordError.textContent) {
                isValid = false;
                e.preventDefault();
                alert("Please fix all errors before submitting.");
            }

            return isValid;
        });
    </script>
</body>

</html>